<% provide(:title, "Resources") %>
<div class="panel panel-default">
  <!-- Default panel contents -->
  <div class="panel-heading">Reserves</div>
  <div class="panel-body">
    <p>Currently uploaded resources for this semester</p>
    <form action="/resources/destroy_multiple" method="post" %>
      <table class="table">
        <tr>
          <th>Item ID</th>
          <th>Title</th>
          <th>Subtitles</th>
          <th>CourseID</th>
          <th>Course Name</th>
          <th>Semester</th>
          <th>Instructor</th>
          <th>URL</th>
          <th>Delete</th>
          <th><input type="checkbox" class="checkAll" name="checkAll" /></th>
        </tr>
        <% for resource in @resources %>
          <tr>
            <td><%= resource.item_id %></td>
            <td><%= resource.title.titleize %></td>
            <td><%= resource.subtitles %></td>
            <td><%= resource.course_id %></td>
            <td><%= resource.course_name %></td>
            <td><%= resource.semester %></td>
            <td><%= resource.instructor %></td>
            <td><%= "http://#{request.host}:3000" + resource_path(resource).to_s %></td>
            <td>
              <button type="button" class="btn btn-primary"><%= link_to 'Delete', resource_path(resource), method: :delete, data: {confirm: 'Are you sure?'} %></button>
            </td>
            <td><%= check_box_tag "resource_ids[]", resource.id %></td>
          </tr>
        <% end %>
      </table>
      <button type="submit" class="btn btn-primary">Delete Checked</button>
    </form>
  </div>
</div>
<!--<script>-->
<!--    $(document).ready(function () {-->
<!--        $('.checkAll').on('click', function () {-->
<!--            $(this).closest('table').find('tbody :checkbox')-->
<!--                .prop('checked', this.checked)-->
<!--                .closest('tr').toggleClass('selected', this.checked);-->
<!--        });-->

<!--        $('tbody :checkbox').on('click', function () {-->
<!--            $(this).closest('tr').toggleClass('selected', this.checked); //Classe de seleção na row-->

<!--            $(this).closest('table').find('.checkAll').prop('checked', ($(this).closest('table').find('tbody :checkbox:checked').length == $(this).closest('table').find('tbody :checkbox').length)); //Tira / coloca a seleção no .checkAll-->
<!--        });-->
<!--    });-->
<!--</script>-->

